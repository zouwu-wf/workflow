# é©ºå¾å·¥ä½œæµç¤ºä¾‹
# ZouWu Workflow Sample - Demonstrating the Five-Colored Benevolent Guardian

id: "sample_zouwu_workflow"
name: "é©ºå¾ç¤ºä¾‹å·¥ä½œæµ"
description: "å±•ç¤ºé©ºå¾äº”å½©æ–‘æ–“ã€ä»å¾·å®ˆæŠ¤çš„ç‰¹æ€§"
version: "1.0.0"
author: "ZouWu System"

# é©ºå¾è§¦å‘å™¨
triggers:
  - intent: "demo_workflow"
  - event: "zouwu_awakens"

# è¾“å…¥å‚æ•°
inputs:
  data:
    type: "object"
    required: true
    description: "å¾…å¤„ç†æ•°æ®"

# é©ºå¾äº”å½©æ­¥éª¤ (Five-Colored Steps)
colors:
  # é’è‰² - æ¡ä»¶åˆ¤æ–­ (Blue - Condition)
  - id: "guardian_check"
    name: "é©ºå¾å®ˆæŠ¤æ£€æŸ¥"
    color: blue
    type: "condition"
    description: "é©ºå¾ä»¥ä»å¾·ä¹‹å¿ƒæ£€æŸ¥æ•°æ®"
    condition:
      field: "{{inputs.data}}"
      operator: "exists"
    guardian:
      gentle: true
      safe: true

  # èµ¤è‰² - åŠ¨ä½œæ‰§è¡Œ (Red - Action)
  - id: "benevolent_action"
    name: "é©ºå¾ä»å¾·å¤„ç†"
    color: red
    type: "action"
    description: "é©ºå¾æ¸©å’Œåœ°å¤„ç†æ•°æ®"
    service: "wenchang"
    action: "process"
    benevolent:
      nonDestructive: true
      preserveOriginal: true
    input:
      data: "{{inputs.data}}"
    dependsOn: ["guardian_check"]

  # é»„è‰² - å†…ç½®æ“ä½œ (Yellow - Builtin)
  - id: "gentle_log"
    name: "é©ºå¾è®°å½•"
    color: yellow
    type: "builtin"
    action: "log"
    input:
      level: "info"
      message: "ğŸ¨ é©ºå¾äº”å½©å¤„ç†ä¸­..."
    dependsOn: ["benevolent_action"]

  # ç™½è‰² - å¹¶è¡Œå¤„ç† (White - Parallel)
  - id: "dual_wings"
    name: "é©ºå¾åŒç¿¼"
    color: white
    type: "parallel"
    description: "é©ºå¾å±•å¼€åŒç¿¼å¹¶è¡Œå¤„ç†"
    wings:
      left: "validation"
      right: "transformation"
    branches:
      - name: "validation"
        steps:
          - id: "validate"
            type: "action"
            service: "wenchang"
            action: "validate"
      - name: "transformation"
        steps:
          - id: "transform"
            type: "action"
            service: "wenchang"
            action: "transform"
    dependsOn: ["gentle_log"]

  # ç„è‰² - å¾ªç¯å¤„ç† (Black - Loop)
  - id: "tail_recursion"
    name: "é©ºå¾é•¿å°¾"
    color: black
    type: "loop"
    description: "é©ºå¾å°¾é•¿äºèº«çš„é“¾å¼å¤„ç†"
    iterator:
      source: "{{inputs.data.items || []}}"
      variable: "item"
    steps:
      - id: "process_item"
        type: "builtin"
        action: "log"
        input:
          message: "å¤„ç†: {{item}}"
    tail:
      long: true
      graceful: true
    dependsOn: ["dual_wings"]

# è¾“å‡ºå®šä¹‰
outputs:
  success:
    type: "boolean"
    description: "å¤„ç†æ˜¯å¦æˆåŠŸ"
  guardian:
    type: "object"
    description: "é©ºå¾å®ˆæŠ¤çŠ¶æ€"

# é©ºå¾ç‰¹æ€§é…ç½®
zouwu:
  benevolence: true      # ä»å¾·æ¨¡å¼
  fiveColors: true       # äº”å½©æ–‘æ–“
  guardian: true         # å®ˆæŠ¤æ¨¡å¼
  preserveData: true     # ä¸é£Ÿæ´»ç‰©
  tailLength: "long"     # é•¿å°¾ç‰¹æ€§

# é”™è¯¯å¤„ç† - ä»å¾·åŒ…å®¹
error_handling:
  default:
    type: "gentle_recovery"
    response:
      success: false
      message: "é©ºå¾æ¸©å’Œåœ°å¤„ç†äº†å¼‚å¸¸"